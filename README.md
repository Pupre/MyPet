# MyPet - Desktop Pet Utility 🐾

가장 직관적이고 아름다운 데스크탑 펫 애플리케이션입니다.

## 🌟 프로젝트 현재 상태 및 진행 현황 (2026-02-21 기준)

이 문서는 다음 개발 세션(다른 환경 포함)에서 인공지능 어시스턴트가 프로젝트의 맥락을 완벽하게 파악할 수 있도록 작성되었습니다.

### **1. 핵심 아키텍처 (Completed)**
*   **다중 펫 지원 (Multi-Pet Architecture)**: 모든 펫 관련 컴포넌트(`PetStateMachine`, `PetGrowthController`, `PetVisualManager` 등)에서 싱글톤을 제거하고 컴포넌트 기반 상호 참조 구조로 리팩토링 완료. 이제 여러 마리를 복사해도 독립적으로 작동합니다.
*   **독립 세이브 시스템**: `pet_data_ID.json` 형식으로 각 펫 인스턴스가 고유한 성장 데이터와 상태를 저장합니다.
*   **상호작용 소유권 (Interaction Ownership)**: 겹쳐 있는 펫 중 클릭한 특정 펫만 레이캐스트를 통해 정확히 식별하고 방사형 메뉴를 소유합니다.

### **2. 구현 완료 기능 (Working)**
*   **성장 및 상태 머신**: 0~5단계 성장 로직 및 Idle/Move/Interact/Struggling 상태 전환.
*   **허기(Hunger) 시스템**: 시간에 따른 실시간/오프라인 허기 감소 및 속도 페널티.
*   **방사형 메뉴 (Radial Menu)**: 글래스모피즘(Glassmorphism) 스타일의 UI 및 펫별 독립 대상 설정.
*   **유연한 비주얼 시스템**: 2D 스프라이트 시트 및 3D 모델 프레임워크 동시 지원.

### **3. 미해결 과제 (Incomplete - Urgent! 🛠️)**
*   **Phase 7: 윈도우 시스템 통합 (NOT WORKING)**
    *   현재 시스템 트레이(Tray) 아이콘, 작업표시줄 아이콘 숨기기, 클릭 잠금(Click-through) 기능이 **빌드 환경에서도 정상 작동하지 않음**.
    *   `Win32Bridge.cs`를 통한 창 핸들(HWND) 획득 타이밍 혹은 윈도우 스타일 변경 플래그(`SWP_FRAMECHANGED` 등)의 깊이 있는 디버깅이 필요함.
    *   유니티 에디터에서는 안전을 위해 비활성화되어 있음.

---

## 🚀 다음 개발 가이드

1.  **Win32 연동 재검토**: `TrayIconManager`와 `Win32Bridge` 사이의 HWND 공유 로직을 다시 점검하고, 빌드 시 로그를 통해 핸들값이 제대로 들어오는지 확인해야 합니다.
2.  **단축키(`Ctrl+Shift+L`) 안정화**: 현재 글로벌 핫키가 안정적으로 인식되지 않는 문제 해결 필요.
3.  **관리 UI 고도화**: 트레이를 통해 열릴 퀵 세팅 패널 구현.

---

## 🛠️ 개발 환경 주의사항 (Handover)
*   **Git Clone 후**: 모든 컴포넌트 설정값은 `.meta` 파일에 저장되어 있으므로 그대로 유지됩니다.
*   **다중 펫 테스트**: 펫 프리팹을 **`Ctrl+D`**로 복사한 뒤, 인스펙터의 `PetGrowthController`에서 **`Pet ID`**를 고유하게(0, 1, 2...) 지정해 주세요.
*   **빌드 설정**: `Standalone Windows` 필수.
